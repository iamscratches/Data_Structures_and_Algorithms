# ğŸšª Number of Ways to Divide a Long Corridor â€“ Combinatorics with Seat Pairing

## ğŸ“œ Problem Statement

**Link:** [LeetCode â€“ Number of Ways to Divide a Long Corridor](https://leetcode.com/problems/number-of-ways-to-divide-a-long-corridor/description/?envType=daily-question&envId=2025-12-14)

You are given a string `corridor` consisting of:

* `'S'` â†’ seat
* `'P'` â†’ plant

You want to divide the corridor into **sections** using vertical dividers such that:

* Each section contains **exactly 2 seats**
* Dividers can only be placed **between characters**

Return the **number of ways** to divide the corridor.
Since the answer can be large, return it modulo **10â¹ + 7**.

---

## ğŸ§  Intuition

This problem is about **grouping seats into pairs** and counting how many divider placements are possible **between consecutive seat pairs**.

Key observations:

1. Every valid section must contain **exactly 2 seats**
2. Total number of seats must be **even**
3. The corridor is divided **between pairs of seats**
4. The number of ways depends on how many positions exist **between consecutive seat pairs**

---

## âš™ï¸ Approach

### **1ï¸âƒ£ Collect Seat Positions**

Store all indices where `'S'` appears.

### **2ï¸âƒ£ Validate Feasibility**

* If number of seats is **0** â†’ no valid partition
* If number of seats is **odd** â†’ impossible to pair â†’ return `0`

### **3ï¸âƒ£ Count Divider Choices**

For every consecutive pair of seat-pairs:

* Let:

  * Previous pair end at `pos[i-1]`
  * Next pair start at `pos[i]`
* Number of possible divider positions is:

  ```
  pos[i] - pos[i-1]
  ```

Multiply all such gaps to get the total number of ways.

---

## âœ… Code Implementation

```java []
class Solution {
    public int numberOfWays(String corridor) {
        int mod = 1_000_000_007;
        ArrayList<Integer> pos = new ArrayList<>();

        // Collect seat positions
        for (int i = 0; i < corridor.length(); i++) {
            if (corridor.charAt(i) == 'S') {
                pos.add(i);
            }
        }

        // Invalid cases
        if (pos.size() % 2 == 1 || pos.size() == 0) {
            return 0;
        }

        long res = 1;

        // Multiply choices between consecutive seat pairs
        for (int i = 2; i < pos.size(); i += 2) {
            int gap = pos.get(i) - pos.get(i - 1);
            res = (res * gap) % mod;
        }

        return (int) res;
    }
}
```

---

## â³ Complexity Analysis

| Metric    | Complexity | Explanation                                  |
| --------- | ---------- | -------------------------------------------- |
| **Time**  | O(n)       | Single pass through corridor                 |
| **Space** | O(s)       | Store seat positions (`s` = number of seats) |

---

## ğŸ“Š Example Walkthrough

### Example 1

```text
Input: corridor = "SSPPSPS"
```

Seat positions:

```text
[0, 1, 4, 6]
```

Seat pairs:

* Pair 1: (0, 1)
* Pair 2: (4, 6)

Divider choices:

```text
gap = 4 - 1 = 3
```

âœ… Result:

```text
3
```

---

### Example 2

```text
Input: corridor = "SPPSPS"
```

Seat count = 3 (odd)
âŒ No valid partition

Output:

```text
0
```

---

## ğŸ’¡ Key Features

* âœ” Elegant combinatorics
* âœ” Avoids brute force
* âœ” Uses seat pairing insight
* âœ” Modular arithmetic handled safely

---

## ğŸš€ When to Use This Pattern

* Problems involving **grouping elements**
* Partitioning with **fixed group sizes**
* Counting valid placements
* Combinatorics with constraints

---

## ğŸ”„ Why Multiplication Works

Each gap between seat pairs is an **independent choice**.
Total ways = product of choices at each divider position.

This follows the **Rule of Product** from combinatorics.

---

## âš ï¸ Edge Cases

| Case                | Output       |
| ------------------- | ------------ |
| No seats            | `0`          |
| Odd number of seats | `0`          |
| Exactly 2 seats     | `1`          |
| All seats clustered | minimal ways |

---

## ğŸ§  Final Takeaway

This is a **classic pairing + gap multiplication** problem:

> **Pair seats â†’ count divider positions â†’ multiply choices**

